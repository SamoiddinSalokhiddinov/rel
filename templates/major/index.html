{% extends '../layout/layout.html'%}
{% load static i18n %}

{% block head%} {% endblock%}

{% block css %} {% endblock %}
{% block body %}
<div class="content-wrapper">
  <!-- Content -->
  <div class="container-xxl flex-grow-1 container-p-y">

    <div class="divider">
      <div class="divider-text" style="font-size: 25px!important;">{% trans 'Enumaration' %}</div>
    </div>
    <div class="row mt-3">
      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header text-center">
            <a href="{% url 'admittance:list' %}">
              <span class="fa-stack fa-shaker  fa-2x">
                <i class="fa fa-circle fa-stack-2x text-success"></i>
                <i class="fa-solid fa-stack-1x fa-calendar-check text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Admittance' %}</p>
            <h3>{{ ac_count }}</h3>
          </div>
        </div>
      </div>

      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header text-center">
            <a href="{% url 'doctor:list' %}">
              <span class="fa-stack fa-shaker  fa-2x">
                <i class="fa fa-circle fa-stack-2x text-primary"></i>
                <i class="fa fa-stack-1x fa-user-doctor text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Doctor' %}</p>
            <h3>{{ dr_count }}</h3>
          </div>
        </div>
      </div>

      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header fa-shaker text-center">
            <a href="{% url 'patient:list' %}">
              <span class="fa-stack fa-2x">
                <i class="fa fa-circle fa-stack-2x text-danger"></i>
                <i class="fa fa-stack-1x fa-bed-pulse text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Patient' %}</p>
            <h3>{{ pt_count }}</h3>
          </div>
        </div>
      </div>

      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header text-center">
            <a href="{% url 'reception:list' %}">
              <span class="fa-stack fa-shaker  fa-2x">
                <i class="fa fa-circle fa-stack-2x text-info"></i>
                <i class="fa-solid fa-stack-1x fa-laptop-medical text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Reception' %}</p>
            <h3>{{ rc_count }}</h3>
          </div>
        </div>
      </div>

      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header text-center">
            <a href="{% url 'nurse:list' %}">
              <span class="fa-stack fa-shaker  fa-2x">
                <i class="fa fa-circle fa-stack-2x text-warning"></i>
                <i class="fa-solid fa-stack-1x fa-user-nurse text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Nurse' %}</p>
            <h3>{{ ns_count }}</h3>
          </div>
        </div>
      </div>

      <div class="col-md-2 col-lg-2 col-6">
        <div class="card icon-card text-center mx-2 mb-4 cursor-pointer">
          <div class="card-header fa-shaker text-center">
            <a href="{% url 'staff:list' %}">
              <span class="fa-stack fa-2x">
                <i class="fa fa-circle fa-stack-2x text-secondary"></i>
                <i class="fa fa-stack-1x fa-users text-white"></i>
              </span>
            </a>
          </div>
          <div class="card-body">
            <p class="icon-name text-truncate text-capitalize mb-0">{% trans 'Staff' %}</p>
            <h3>{{ st_count }}</h3>
          </div>
        </div>
      </div>


    </div>

    <div class="divider">
      <div class="divider-text" style="font-size: 25px!important;">{% trans 'Statistics' %}</div>
    </div>
    <div class="row mt-3">
      <!-- Top Referrals -->
      <div class="col-xxl-3 mb-xxl-0 col-md-6 col-xl-4 order-2 order-lg-0 mb-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">Top Referrals</h5>
          </div>
          <div class="table-responsive">
            <table class="table table-borderless mb-1">
              <thead class="border-bottom">
                <tr>
                  <th class="pt-0">Source</th>
                  <th class="pt-0">users</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="avatar avatar-sm flex-shrink-0 me-2">
                        <span class="avatar-initial bg-label-primary rounded-circle"><i class="bx bx-laptop"></i></span>
                      </div>
                      <div class="">
                        <p class="lh-1 text-nowrap mb-0">Internal Traffic</p>
                        <small class="text-muted text-nowrap">58%</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <h6 class="mb-0">28k</h6>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="avatar avatar-sm flex-shrink-0 me-2">
                        <span class="avatar-initial bg-label-success rounded-circle"><i
                            class="bx bx-link-alt"></i></span>
                      </div>
                      <div class="">
                        <p class="lh-1 text-nowrap mb-0">Direct Traffic</p>
                        <small class="text-muted text-nowrap">26%</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <h6 class="mb-0">18k</h6>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="avatar avatar-sm flex-shrink-0 me-2">
                        <span class="avatar-initial bg-label-warning rounded-circle"><i
                            class="bx bx-search-alt"></i></span>
                      </div>
                      <div class="">
                        <p class="lh-1 text-nowrap mb-0">Search Traffic</p>
                        <small class="text-muted text-nowrap">10%</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <h6 class="mb-0">8K</h6>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="avatar avatar-sm flex-shrink-0 me-2">
                        <span class="avatar-initial bg-label-info rounded-circle"><i class="bx bx-star"></i></span>
                      </div>
                      <div class="">
                        <p class="lh-1 text-nowrap mb-0">Social Traffic</p>
                        <small class="text-muted text-nowrap">6%</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <h6 class="mb-0">1k</h6>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!--/ Top Referrals -->

      <!-- All Users -->
      <div class="col-xxl-3 col-md-6 col-xl-4 order-3 order-lg-0">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-2">All Users</h5>
            <h1 class="display-6 fw-normal mb-0">8,634,820</h1>
          </div>
          <div class="card-body">
            <span>Current Activity</span>
            <div class="progress progress-stacked mb-3" style="height: 8px">
              <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30"
                aria-valuemin="0" aria-valuemax="100"></div>
              <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15"
                aria-valuemin="0" aria-valuemax="100"></div>
              <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10"
                aria-valuemin="0" aria-valuemax="100"></div>
              <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40"
                aria-valuemin="0" aria-valuemax="100"></div>
              <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <ul class="p-0 m-0">
              <li class="d-flex justify-content-between mb-2">
                <div class="lh-1 d-flex align-items-center me-3">
                  <span class="badge badge-dot bg-success me-2"></span> USA
                </div>
                <div class="gap-3 d-flex">
                  <span>29.5k</span>
                  <span class="fw-semibold">56%</span>
                </div>
              </li>
              <li class="d-flex justify-content-between mb-2">
                <div class="lh-1 d-flex align-items-center me-3">
                  <span class="badge badge-dot bg-danger me-2"></span> France
                </div>
                <div class="gap-3 d-flex">
                  <span>25.7k</span>
                  <span class="fw-semibold">26%</span>
                </div>
              </li>
              <li class="d-flex justify-content-between mb-2">
                <div class="lh-1 d-flex align-items-center me-3">
                  <span class="badge badge-dot bg-info me-2"></span> Italy
                </div>
                <div class="gap-3 d-flex">
                  <span>11.5k</span>
                  <span class="fw-semibold">34%</span>
                </div>
              </li>
              <li class="d-flex justify-content-between mb-2">
                <div class="lh-1 d-flex align-items-center me-3">
                  <span class="badge badge-dot bg-primary me-2"></span> China
                </div>
                <div class="gap-3 d-flex">
                  <span>48.5k</span>
                  <span class="fw-semibold">45%</span>
                </div>
              </li>
              <li class="d-flex justify-content-between">
                <div class="lh-1 d-flex align-items-center me-3">
                  <span class="badge badge-dot bg-warning me-2"></span> India
                </div>
                <div class="gap-3 d-flex">
                  <span>22.1k</span>
                  <span class="fw-semibold">7%</span>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!--/ All Users -->


      <!-- Sales -->
      <div class="col-xxl-3 col-md-6 col-xl-4 order-2 order-lg-0 mb-4 mb-lg-0">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-start">
            <div class="card-title mb-0">
              <h5 class="m-0 me-2">Sales</h5>
              <small class="card-subtitle text-muted">Calculated in last 7 days</small>
            </div>
            <div class="dropdown">
              <button class="btn p-0" type="button" id="salesReport" data-bs-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="bx bx-dots-vertical-rounded"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="salesReport">
                <a class="dropdown-item" href="javascript:void(0);">Select All</a>
                <a class="dropdown-item" href="javascript:void(0);">Refresh</a>
                <a class="dropdown-item" href="javascript:void(0);">Share</a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div id="salesChart"></div>
            <ul class="p-0 m-0 mt-1">
              <li class="d-flex mb-3">
                <span class="text-primary me-2"><i class="bx bx-up-arrow-alt bx-sm"></i></span>
                <div class="gap-2 d-flex flex-wrap justify-content-between align-items-center w-100">
                  <div class="me-2">
                    <h6 class="lh-1 mb-0">Best Selling</h6>
                    <small class="text-muted">Saturday</small>
                  </div>
                  <div class="item-progress">28.6k</div>
                </div>
              </li>
              <li class="d-flex">
                <span class="text-secondary me-2"><i class="bx bx-down-arrow-alt bx-sm"></i></span>
                <div class="gap-2 d-flex flex-wrap justify-content-between align-items-center w-100">
                  <div class="me-2">
                    <h6 class="lh-1 mb-0">Lowest Selling</h6>
                    <small class="text-muted">Thursday</small>
                  </div>
                  <div class="item-progress">7.9k</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!--/ Sales -->

    </div>

    <div class="divider">
      <div class="divider-text" style="font-size: 25px!important;">{% trans 'Analytics' %}</div>
    </div>
    <div class="statistics-box mt-3">
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Daily Sales States</h5>
              <div class="dropdown">
                <button class="btn p-0" type="button" id="heatChartDd" data-bs-toggle="dropdown" aria-haspopup="true"
                  aria-expanded="false">
                  <i class="bx bx-dots-vertical-rounded"></i>
                </button>
                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="heatChartDd">
                  <a class="dropdown-item" href="javascript:void(0);">Last 28 Days</a>
                  <a class="dropdown-item" href="javascript:void(0);">Last Month</a>
                  <a class="dropdown-item" href="javascript:void(0);">Last Year</a>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div id="heatMapChart"></div>
            </div>
          </div>

        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header d-flex justify-content-between">
              <div>
                <h5 class="card-title mb-0">Last updates</h5>
                <small class="text-muted">Commercial networks</small>
              </div>
              <div class="dropdown">
                <button type="button" class="btn dropdown-toggle px-0" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bx bx-calendar"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Today</a>
                  </li>
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Yesterday</a>
                  </li>
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Last 7 Days</a>
                  </li>
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Last 30 Days</a>
                  </li>
                  <li>
                    <hr class="dropdown-divider" />
                  </li>
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Current Month</a>
                  </li>
                  <li>
                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">Last Month</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="card-body">
              <div id="lineAreaChart"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- / Content -->

  <div class="content-backdrop fade"></div>
</div>
{% endblock body %}


{% block js %}
<script>

  $(document).ready(function () {
    const areaChartEl = document.querySelector('#lineAreaChart');
    const areaChartConfig = {
      chart: {
        height: 400,
        type: 'area',
        parentHeightOffset: 0,
        toolbar: {
          show: false
        }
      },
      dataLabels: {
        enabled: false
      },
      stroke: {
        show: false,
        curve: 'straight'
      },
      legend: {
        show: true,
        position: 'top',
        horizontalAlign: 'start'
      },
      grid: {
        xaxis: {
          lines: {
            show: true
          }
        }
      },
      colors: ['#a5f8cd', '#60f2ca', '#29dac7'],
      series: [
        {
          name: 'Visits',
          data: [100, 120, 90, 170, 130, 160, 140, 240, 220, 180, 270, 280, 375]
        },
        {
          name: 'Clicks',
          data: [60, 80, 70, 110, 80, 100, 90, 180, 160, 140, 200, 220, 275]
        },
        {
          name: 'Sales',
          data: [20, 40, 30, 70, 40, 60, 50, 140, 120, 100, 140, 180, 220]
        }
      ],
      xaxis: {
        categories: [
          '7/12',
          '8/12',
          '9/12',
          '10/12',
          '11/12',
          '12/12',
          '13/12',
          '14/12',
          '15/12',
          '16/12',
          '17/12',
          '18/12',
          '19/12',
          '20/12'
        ]
      },
      fill: {
        opacity: 1,
        type: 'solid'
      },
      tooltip: {
        shared: false
      }
    };
    if (typeof areaChartEl !== undefined && areaChartEl !== null) {
      const areaChart = new ApexCharts(areaChartEl, areaChartConfig);
      areaChart.render();
    }
  })
</script>
<script>
  $(document).ready(function () {
    function generateDataHeat(count, yrange) {
      let i = 0;
      let series = [];
      while (i < count) {
        let x = 'w' + (i + 1).toString();
        let y = Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

        series.push({
          x: x,
          y: y
        });
        i++;
      }
      return series;
    }

    const heatMapEl = document.querySelector('#heatMapChart');
    const heatMapChartConfig = {
      chart: {
        height: 350,
        type: 'heatmap',
        parentHeightOffset: 0,
        toolbar: {
          show: false
        }
      },
      plotOptions: {
        heatmap: {
          enableShades: false,
          colorScale: {
            ranges: [
              {
                from: 0,
                to: 10,
                name: '0-10',
                color: '#90B3F3'
              },
              {
                from: 11,
                to: 20,
                name: '10-20',
                color: '#7EA6F1'
              },
              {
                from: 21,
                to: 30,
                name: '20-30',
                color: '#6B9AEF'
              },
              {
                from: 31,
                to: 40,
                name: '30-40',
                color: '#598DEE'
              },
              {
                from: 41,
                to: 50,
                name: '40-50',
                color: '#4680EC'
              },
              {
                from: 51,
                to: 60,
                name: '50-60',
                color: '#3474EA'
              }
            ]
          }
        }
      },
      dataLabels: {
        enabled: false
      },
      legend: {
        show: true,
        position: 'top',
        horizontalAlign: 'start'
      },
      series: [
        {
          name: 'SUN',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'MON',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'TUE',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'WED',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'THU',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'FRI',
          data: generateDataHeat(24, { min: 0, max: 60 })
        },
        {
          name: 'SAT',
          data: generateDataHeat(24, { min: 0, max: 60 })
        }
      ],
      xaxis: {
        labels: {
          show: false
        },
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false
        }
      }
    };
    if (typeof heatMapEl !== undefined && heatMapEl !== null) {
      const heatMapChart = new ApexCharts(heatMapEl, heatMapChartConfig);
      heatMapChart.render();
    }
  })
</script>
{% endblock js %}